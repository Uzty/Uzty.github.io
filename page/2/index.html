
 <!DOCTYPE HTML>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
  
    <title>朱天宇</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="朱天宇">
    

    
    <meta name="description" content="云雀叫了一整天">
<meta property="og:type" content="website">
<meta property="og:title" content="朱天宇">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="朱天宇">
<meta property="og:description" content="云雀叫了一整天">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="朱天宇">
<meta name="twitter:description" content="云雀叫了一整天">

    
    <link rel="alternative" href="/atom.xml" title="朱天宇" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="朱天宇" title="朱天宇"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="朱天宇">朱天宇</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/03/15/常用CSS优化/" title="常用CSS优化" itemprop="url">常用CSS优化</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="朱天宇" target="_blank" itemprop="author">朱天宇</a>
		
  <p class="article-time">
    <time datetime="2016-03-15T14:40:51.000Z" itemprop="datePublished"> Published 2016-03-15</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>关于CSS的优化工作主要从两个方面着手</p>
<ul>
<li>网络性能：把CSS写到字节数最少，加快下载速度，自然可以让页面渲染的更快一些</li>
<li>语法性能：同样都能实现某些效果，但并不是所有的方式效果都相同，我们看过不少关于JavaScript方面的语法优化知识，其实CSS里面也有一些<h2 id="CSS压缩"><a href="#CSS压缩" class="headerlink" title="CSS压缩"></a>CSS压缩</h2></li>
</ul>
<p>CSS压缩并不是什么高端的姿势，但却很有用，其原理很简单，就是把我们CSS中没用的空白符等删去，达到缩减字符个数的目的</p>
<p>我们有这样一段CSS脚本<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">.test&#123;</div><div class="line">    background-color:<span class="comment">#ffffff;</span></div><div class="line">    background-image:url(a.jpg);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>经过压缩后会变成这样<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">.test&#123; background-color:<span class="comment">#fff;  background-image:url(a.jpg)&#125;</span></div></pre></td></tr></table></figure></p>
<p>当然高级些的压缩工具也会帮我们优化一些语法，提供很多选项，让我们的压缩更有控制，之前在的公司不采用CSS压缩，所以我没有什么实践经验，自己写东西常用的是YUI Compressor，有很多在线版的很方便</p>
<h2 id="gzip压缩"><a href="#gzip压缩" class="headerlink" title="gzip压缩"></a>gzip压缩</h2><p>Gzip是一种流行的文件压缩算法，现在的应用十分广泛，尤其是在Linux平台，这个不止是对CSS，当应用Gzip压缩到一个纯文本文件时，效果是非常明显的，大约可以减少70％以上的文件大小（这取决于文件中的内容）。想进一步了解gzip看看维基百科。</p>
<p>在没有gzip压缩的情况下，Web服务器直接把html页面、CSS脚本、js脚本发送给浏览器，而支持gzip的Web服务器将把文件压缩后再发给浏览器，浏览器（支持gzip）在本地进行解压和解码，并显示原文件。这样我们传输的文件字节数减少了，自然可以达到网络性能优化的目的。gzip压缩需要服务器的支持，所以我们需要在服务器端进行配置</p>
<p>当然除了gzip压缩，缓存也是我们需要注意的，这和CSS优化关系不大了，在说web优化的时候再说</p>
<h2 id="合写CSS"><a href="#合写CSS" class="headerlink" title="合写CSS"></a>合写CSS</h2><p>除了压缩的方式，我们还可以通过少写CSS属性来达到减少CSS字节的目的，拿个最常见的例子</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">.test&#123;</div><div class="line"> background-color: <span class="comment">#000;</span></div><div class="line"> background-image: url(image.jpg);</div><div class="line"> background-position: left top;</div><div class="line"> background-repeat: no-repeat;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>我们可以改写一下上面的CSS，达到同样的效果<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">.test&#123;</div><div class="line">  background: <span class="comment">#000 url(image.jpg) top left no-repeat;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在CSS中还有很多类似的属性可以合写</p>
<p>font<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;font-style: oblique; font-weight: bold; font-size: 16px; font-family: Helvetica, Arial, Sans-Serif;&#125;</div><div class="line"></div><div class="line">&#123;font: oblique bold 16px Helvetica, Arial, Sans-Serif;&#125;</div></pre></td></tr></table></figure></p>
<p>margin/padding<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;margin-top: 5px; margin-right: 10px; margin-bottom: 20px; margin-left: 15px;&#125;</div><div class="line"></div><div class="line">&#123;margin: 5px 10px 20px 15px;&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&#123;padding-top: 5px; padding-right: 10px; padding-bottom: 5px; padding-left: 10px;&#125;</div><div class="line"></div><div class="line">&#123;padding: 5px 10px&#125;</div><div class="line"></div><div class="line">&#123;padding-top: 5px; padding-right: 5px; padding-bottom: 5px; padding-left: 5px;&#125;</div><div class="line"></div><div class="line">&#123;padding:5px;&#125;</div></pre></td></tr></table></figure>
<p>background<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;background-color: <span class="comment">#000; background-image: url(image.jpg); background-position: left top; background-repeat: no-repeat;&#125;</span></div><div class="line"></div><div class="line">&#123;background: <span class="comment">#000 url(image.jpg) top left no-repeat;&#125;</span></div></pre></td></tr></table></figure></p>
<p>border<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;border-width: 2px; border-style: solid; border-color: <span class="comment">#000;&#125;</span></div><div class="line"></div><div class="line">&#123;border: 2px solid <span class="comment">#000;&#125;</span></div><div class="line">&#123;border-top: 2px; border-right: 5px; border-left: 10px; border-bottom: 3px;&#125;</div><div class="line"></div><div class="line">&#123;border: 2px 5px 10px 3px;&#125;</div></pre></td></tr></table></figure></p>
<p>另外CSS3添加的很多属性如transform、animation相关的都可以合写，不一一列举，大家用的时候要注意</p>
<h2 id="利用继承"><a href="#利用继承" class="headerlink" title="利用继承"></a>利用继承</h2><p>CSS的继承机制也可以帮我们再一定程度上缩减字节数，我们知道CSS有很多属性是可以继承的即在父容器设置了默写属性，子容器会默认也使用这些属性，因此如果我们希望全文字体尺寸是14px，大可不必为每个容器设置，只需要在body上设置就可以了。应用这个技巧，把CSS属性在可能的情况下提到父容器是可以帮我们节省CSS字节的，顺便说一下哪些属性可以继承</p>
<ul>
<li>所有元素可继承：visibility和cursor</li>
<li>内联元素和块元素可继承：letter-spacing、word-spacing、white-space、line-height、color、font、 font-family、font-size、font-style、font-variant、font-weight、text- decoration、text-transform、direction</li>
<li>块状元素可继承：text-indent和text-align<br>列表元素可继承：list-style、list-style-type、list-style-position、list-style-image</li>
<li>表格元素可继承：border-collapse</li>
<li>不可继承的：display、margin、border、padding、background、height、min-height、max- height、width、min-width、max-width、overflow、position、left、right、top、 bottom、z-index、float、clear、table-layout、vertical-align、page-break-after、 page-bread-before和unicode-bidi</li>
</ul>
<h2 id="抽离、拆分CSS，不加载所有CSS"><a href="#抽离、拆分CSS，不加载所有CSS" class="headerlink" title="抽离、拆分CSS，不加载所有CSS"></a>抽离、拆分CSS，不加载所有CSS</h2><p>抽离CSS是指把一些通用的CSS放到一个文件内，而不是写道各个页面，这样一次下载后，其它页面用到的时候就可以利用缓存了，减少不必要的重复下载。</p>
<p>应用抽离原则，在很多时候我们把页面通用的CSS写到了一个文件，这样加载一次后就可以利用缓存，但这样做并不适合所有场景，以前我写CSS把一些前端插件用的CSS全写到了一个页面，但是有时候页面只会用一个Dialog、有的页面只用到了一个TreeView，但却把十多个插件的CSS都下载到了页面，这就是问题了，所以虽然把CSS写道一个文件可以减少http请求，但像刚才的这种情况是不应该这样做的，对一些所有页面都会用到的我们可以这样做，所以我们在抽离和拆分的时候可要想好了。</p>
<h2 id="CSS放在head中，减少repaint和reflow"><a href="#CSS放在head中，减少repaint和reflow" class="headerlink" title="CSS放在head中，减少repaint和reflow"></a>CSS放在head中，减少repaint和reflow</h2><p>相信做web的同学都知道这条建议，但为什么CSS放在页面顶部有利于网页优化呢？浏览器渲染页面大概是这样的，当浏览器从上到下一边下载html生成DOM tree一边根据浏览器默认及现有CSS生成render tree来渲染页面，当遇到新的CSS的时候下载并结合现有CSS重新生成render tree，刚才的渲染工作就白费了，如果我们把所有CSS都放到页面顶部，这样就没有重新渲染的过程了。</p>
<p>类似的我们知道了这个也应该在脚本中注意尽量减少repaint和reflow，什么情况会导致这两种情况呢</p>
<p>reflow：当DOM元素出现隐藏／显示、尺寸变化、位置变化的时候都会让浏览器重新渲染页面，之前渲染工作白费了</p>
<p>repaint：当元素的背景颜色、边框颜色不引起reflow的变化是会让浏览器重新渲染该元素。貌似还可以接受，但如果我们在开始就定义好了，不让浏览器重复工作就更好了。 </p>
<p>不用CSS表达式</p>
<p>无论怎样生成的CSS，最终我们放到页面上得是静态普通文本，没有变量、计算神马的，CSS表达式是一种动态设置CSS属性的东东，被IE5-IE8支持，看一个大家常用的例子<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">body &#123;</div><div class="line">  background-color: expression((new Date()).getHours()%2?<span class="string">"#B8D4FF"</span>:<span class="string">"#F08A00"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p> 这样我们赋予了CSS类似JavaScript的功能，CSS表达式非常强大，甚至可以使用CSS表达式实现 min-width 属性，隔行换色，模拟 :hover, :before, :after 等伪类，看起来能解决很多IE下的浏览器兼容性等问题，但是其带来的副作用超出我们的想象，这条CSS规则并不是只运行一次，为了确保有效性，CSS表达式会进行频繁的求值，当改变窗口大小，滚动页面甚至移动鼠标都会触发表达式进行求值，如此频繁的求值以至于浏览器的性能收到严重的影响。据《高性能网站建设建议》中的测试其执行次数远远超出我们想象，感兴趣同学可以进去看看，我们的建议就试尽量避免甚至不要使用CSS表达式。</p>
<h2 id="不乱用CSS-reset或属性设置"><a href="#不乱用CSS-reset或属性设置" class="headerlink" title="不乱用CSS reset或属性设置"></a>不乱用CSS reset或属性设置</h2><p>在网站建设中我们经常使用一些CSS reset，达到跨浏览器统一的目的，但是很多时候我们的CSS reset过于臃肿，主要有两个问题</p>
<ul>
<li>把很多浏览器对元素的默认属性有设置了一边，比如div的padding和margin为0啊什么的，这是没有必要的</li>
<li>把一些很不常用的元素的设置也写进了CSS reset，如 ruby这样的元素</li>
</ul>
<h2 id="避免适用通配符或隐式通配符"><a href="#避免适用通配符或隐式通配符" class="headerlink" title="避免适用通配符或隐式通配符"></a>避免适用通配符或隐式通配符</h2><p>CSS中的*代表通配符，虽然好用但使用不当这也是一个恶魔，比如<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">body * &#123;padding:0;margin:0;&#125;</div></pre></td></tr></table></figure></p>
<p>我们以为这是对body的子结点都设置一些属性，但因为CSS继承特性的原因，页面所有元素都会接受这个规则，对于复杂的页面在性能上的影响还是很大的，这并不是说不能使用通配符，而是说使用的时候要注意范围。相信这个规则大家都知道，但是有一些隐式的通配符也需要我们的注意，比如<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">:visible&#123;</div><div class="line">  padding:0;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这样的几乎就和通配符一样，在使用的时候一定要注意范围限制问题</p>
<h2 id="避免层级或过度限制的CSS"><a href="#避免层级或过度限制的CSS" class="headerlink" title="避免层级或过度限制的CSS"></a>避免层级或过度限制的CSS</h2><p>估计web开发的同学都看过MDN上Writing efficient CSS或者其各种翻译版本，文中总结了几点在书写CSS selector的意见，搞明白文中建议的一个前提是得知道CSS是从右到左解析的，而不是我们认为的从左到右，关于为什么这样做肯定是因为高效，不明就里的同学可以上网搜一下相关知识</p>
<p>不要用标签或 class 来限制 ID 规则</p>
<p>这个应该是个常识，但很多同学都会误用，写出#test.info或者div#test这样的选择器，这个只能说是画蛇添足，id已经可以唯一而且最快的定位一个元素了</p>
<p>不要用标签名限制 class 规则</p>
<p> 这个估计被误用的更多，如div.info这样的写法，其实我们可以直接写为.info，从右到左解析的原因可以知道为什么其低效，如果直接使用class不能达到目的，一般情况下应该是class设计的有问题，CSS需要重构了</p>
<p>尽量使用最具体的类别、避免后代选择器、属于标签类别的规则永远不要包含子选择器</p>
<p>这三条规则是想通的，因为从左到右解析关系，在CSS选择器中后代选择器非但没有帮我们加快CSS查找，反而后代选择器是 CSS 中耗费最昂贵的选择器。 它的耗费是极其昂贵的—特别是当选择器在标签或通用类别中，作者给的建议是当使用子选择器时要十分谨慎，能免则免。其开销可见一斑了。</p>
<p>对此我们可以通过具体类别——使用单一或尽量少的class解决。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/CSS/">CSS</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/CSS/">CSS</a><a href="/tags/优化/">优化</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/23/base标签/" title="base标签" itemprop="url">base标签</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="朱天宇" target="_blank" itemprop="author">朱天宇</a>
		
  <p class="article-time">
    <time datetime="2015-06-23T01:24:12.000Z" itemprop="datePublished"> Published 2015-06-23</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="base标签的两个作用"><a href="#base标签的两个作用" class="headerlink" title="base标签的两个作用"></a>base标签的两个作用</h2><pre><code>HTML中有一个base标签,我们可以通过该标签将需要加载的文件路径写成相对于项目的，而不是相对于当前页面的
代码如下 
</code></pre><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;base href=<span class="string">"http://static.cnblogs.com/"</span> /&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;img src=<span class="string">"./images/logo_gray.gif"</span> /&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>我们会发现，我们用相对路径./images/logo_gray.gif加载的图片，却变成了<a href="http://static.cnblogs.com/images/logo_gray.gif的图片。" target="_blank" rel="external">http://static.cnblogs.com/images/logo_gray.gif的图片。</a><br>base标签可以给页面的链接加上默认的路径，或者默认的打开方式。<br>下面是一个设置默认打开方式的例子：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;base target=<span class="string">"_blank"</span> /&gt;</div><div class="line">&lt;/head&gt;&lt;/p&gt; &lt;p&gt;&lt;body&gt;</div><div class="line">&lt;a href=<span class="string">"http://www.cnblogs.com"</span>&gt;这个页面会在新窗口打开&lt;/a&gt;</div><div class="line">&lt;a href=<span class="string">"http://justany.cnblogs.com"</span>&gt;这个页面也会在新窗口打开&lt;/a&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p>
<h2 id="base标签的BUG"><a href="#base标签的BUG" class="headerlink" title="base标签的BUG"></a>base标签的BUG</h2><p>base标签最好不要动态写入，否则在Firefox和IE中会有一个小bug，比如对于页面<a href="http://localhost/static/test.html：" target="_blank" rel="external">http://localhost/static/test.html：</a><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;script&gt;</div><div class="line">document.write(<span class="string">'&lt;base href="http://localhost/" /&gt;'</span>);</div><div class="line">&lt;/script&gt;</div><div class="line">&lt;/head&gt;&lt;/p&gt; &lt;p&gt;&lt;body&gt;</div><div class="line">&lt;img src=<span class="string">"static/1.jpg"</span> /&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p>
<p>Firefox和IE中会先加载<a href="http://localhost/static/static/1.jpg，然后再加载http://localhost/static/1.jpg。也就是说，他们都先尝试用相对于当前页面的路径进行加载，然后再通过base标签设置的默认路径加载。" target="_blank" rel="external">http://localhost/static/static/1.jpg，然后再加载http://localhost/static/1.jpg。也就是说，他们都先尝试用相对于当前页面的路径进行加载，然后再通过base标签设置的默认路径加载。</a><br>而Chrome却能正常加载。</p>
<h3 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h3><p>造成这种问题的原因可能是浏览器对资源加载进行了优化，导致动态插入base标签并未生效时，就预先去加载了，结果出错，然后base标签生效于是又加载正确的资源。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/HTML/">HTML</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/HTML/">HTML</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/03/02/hexo博客使用图片/" title="hexo博客使用图片" itemprop="url">hexo博客使用图片</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="朱天宇" target="_blank" itemprop="author">朱天宇</a>
		
  <p class="article-time">
    <time datetime="2015-03-02T00:23:21.000Z" itemprop="datePublished"> Published 2015-03-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>之前使用base64解码图片，使用简单，但是一大片编码看着很乱，在网上发现CodeFalling/hexo-asset-image插件来加载本地图片。使用方法：</p>
<p>1.首先确认<code>_config.yml</code> 中有 <code>post_asset_folder:true</code>。<br>Hexo 提供了一种更方便管理 Asset 的设定：<code>post_asset_folder</code><br>当您设置<code>post_asset_folder</code>为<code>true</code>参数后，在建立文件时，Hexo<br>会自动建立一个与文章同名的文件夹，您可以把与该文章相关的所有资源都放到那个文件夹，如此一来，您便可以更方便的使用资源。<br>2.在hexo的目录下执行<code>npm install https://github.com/CodeFalling/hexo-asset-image --save</code>（需要等待一段时间）。<br>3.完成安装后用hexo新建文章的时候会发现<code>_posts</code>目录下面会多出一个和文章名字一样的文件夹。图片就可以放在文件夹下面。结构如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">本地图片测试</div><div class="line">├── apppicker.jpg</div><div class="line">├── logo.jpg</div><div class="line">└── rules.jpg</div><div class="line">本地图片测试.md</div></pre></td></tr></table></figure></p>
<p>这样的目录结构（目录名和文章名一致），只要使用 <code>![logo](本地图片测试/logo.jpg)</code> 就可以插入图片。其中[]里面不写文字则没有图片标题。<br>生成的结构为<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">public/2016/3/9/本地图片测试</div><div class="line">├── apppicker.jpg</div><div class="line">├── index.html</div><div class="line">├── logo.jpg</div><div class="line">└── rules.jpg</div></pre></td></tr></table></figure></p>
<p>同时，生成的 html 是</p>
<p><code>&lt;img src=&quot;/2016/3/9/本地图片测试/logo.jpg&quot; alt=&quot;logo&quot;&gt;</code></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/hexo/">hexo</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/hexo/">hexo</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/"><span></span>Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  


  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
		  
			<li><a href="/categories/Bootstrap/" title="Bootstrap">Bootstrap<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/CSS/" title="CSS">CSS<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/Flex布局/" title="Flex布局">Flex布局<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/HTML/" title="HTML">HTML<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/JS/" title="JS">JS<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/Node-js/" title="Node.js">Node.js<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/hexo/" title="hexo">hexo<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/网络问题/" title="网络问题">网络问题<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/JS/" title="JS">JS<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/CSS/" title="CSS">CSS<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/HTML/" title="HTML">HTML<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/U/" title="U">U<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/网络问题/" title="网络问题">网络问题<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Node-js/" title="Node.js">Node.js<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Flex布局/" title="Flex布局">Flex布局<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/hexo/" title="hexo">hexo<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Bootstrap/" title="Bootstrap">Bootstrap<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Event/" title="Event">Event<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/弹性布局/" title="弹性布局">弹性布局<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/优化/" title="优化">优化<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">Weibo</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=null&verifier=b3593ceb&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Larry Page in Google. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/2176287895" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2017 
		
		<a href="/about" target="_blank" title="朱天宇">朱天宇</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
